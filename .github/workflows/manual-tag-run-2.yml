name: Manual Run from Tag

on:
  workflow_dispatch:

jobs:
  run-from-tag:
    runs-on: ubuntu-latest

    steps:
      - name: Print selected tag/branch
        run: echo "You selected tag ${{ github.ref }}"

      - name: Stop if branch
        run: |
          if [[ "${GITHUB_REF}" == refs/heads/* ]]; then
            echo "This run is from a branch. Stopping workflow."
            exit 1
          fi

      - name: Checkout code at tag
        uses: actions/checkout@v3
#        with:
#          ref: refs/tags/${{ github.event.inputs.tag }}

      - name: Simulate deployment
        run: |
          echo "Running workflow from tag ${{ github.ref }}"
          # Replace this with real deployment logic

      - name: Print README.md
        run: |
          echo "==== README.md from tag ${{ github.ref }} ===="
          cat README.md || echo "README.md not found in tag ${{ github.ref }}"